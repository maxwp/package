Subject: Предварительные правила описания документации в пакетах

Дата создания: 2011-06-03.
Автор: Maxim Miroshnichenko
Статус документа: в разработке
Ориентировочная дата полного внедрения: не определена.

==============================
Способ хранения
==============================
Вся документация по пакету храниться вместе с пакетом в отдельной директории
/docs/. Например, если пакет Engine находиться по адресу:

svn://svn.webproduction.com.ua/packages/Engine/trunk/

то документация по нему будет по адресу:

svn://svn.webproduction.com.ua/packages/Engine/trunk/docs/

==============================
Кодировка файлов документации
==============================
Как и для всех файлов в #wpp - только UTF-8.

==============================
Структура файлов документации
==============================
Внутри каждой директории /docs/ может быть файл index (index.txt, index.html
или index.markdown). Этот файл - точка входа в документацию.

В index-файле должны быть минимум три секции:

1. Секция "Короткое описание пакета" (именно короткое!).
Описание должно коротко и ясно (без заумных абстрактных слов) разработчику
любого уровня объяснить что это за пакет и для чего он нужен.

2. Секция "Подключение в #wpp".
В этой секции должен быть очень короткий пример кода, который показывает
как и где подключить пакет.
Если у пакета есть зависимости (например, от других пакетов, от таблиц в
базе, прочее) - они должны быть обязательно описаны.

3. Секция "Design pattern пакета".
В этой секции должны быть перечислены:
- шаблоны проектирования, на основании которых построен пакет.
- принцип пакета: он фундаментальный (foundamental) или собирательный
(harvested).

Например, пакет Engine:
Одновременно фундаментальный и собирательный.
Engine - Singleton + Registry + Facade.
Engine_Query - паттен Front Controller.
Engine_ContentDriver + Engine_ContentDataSource - Singleton + HMVC
(Hierarchical MVC).
Engine_Cache - Singleton + Registry.
Engine_Listeners - Observer (Public/Subscribe, Listener).
и так далее.

==============================
Глобальная документация
==============================
Существует так называемая глобальная документация.
Например, документ, который вы сейчас читаете - можно считать глобальным,
так как он относиться ко всем пакетам одновременно. В большей степени это
правила и рекомендации ко всем пакетам #wpp.

Такая документация показывается на главной странице
http://packages.webproduction.com.ua/.

Глобальная документация храниться в директории /docs/ в пакете PackageLoader.
Именно PackageLoader считает стартовым пакетом, поэтому именно его
документация считается глобальной.

Файлы глобальной документации имеют префикс "global-".
Например:

global-sr-packages.txt
global-sr-docs.txt
…

Второй префикс sr- означает "style requirements" или по-русски
"стилевые требования". В sr-документах описываются стилевые правила
кодирования, разметки и так далее.

==============================
Форматы хранений
==============================
Документация храниться в текстовых форматах.

Допускаются любые текстовые форматы хранения. В частности, это:
txt, html, markdown (md, wiki).

Категорически запрещены бинарные форматы (doc, docx, pdf, …).

Если в документации необходимо вложить какой-либо бинарный файл
(чаще всего картинку), то в директории /docs/ нужно создать директорию
/media/ и положить картинку в нее. То есть, все не текстовые файлы
должны быть по адресу /docs/media/ в пределах документации пакета.