Subject: Правила удаления deprecated-кода (graceful degradation)

Дата создания: 2011-06-05.
Автор: Maxim Miroshnichenko <max@webproduction.com.ua>
Статус документа: в разработке

Так как #wpp очень активно развивается и меняется, код постоянно обрастает
лишними не актуальными методами, классами, свойствами, которые со временем
становятся не нужными, и их хотелось-бы удалить, но обратная совместимость
будет нарушена.

Текущий документ регламентирует правила graceful degradation для #wpp.

==============================
Общая схема
==============================
Если разработчик хочет удалить какой-либо ранее существующий метод или класс
или свойство, то:

1. он ставит на него пометку @deprecated в нотациях phpdoc, jsdoc и т.д.
2. он уведомляет всех в mailing list'e, что такой-то метод помечен как
@deprecated и будет удален в соответствии с правилами #wpp и в следующем
релизе пакета (tags/release) его уже не будет.
3. Только через 15 календарных дней после уведомления в mailing list'e
разработчик может удалить этот метод.

==============================
Установка пометки @deprecated
==============================
Установка пометок @deprecated в tags запрещена.
Пометки @deprecated можно ставить только в trunk.

То есть, пометка ставится в trunk, затем уведомление в mailing list'e
про @deprecated такого-то кода, затем через 15 дней удаление этого кода и
в следующем релизе получаем чистый пакет.

Возможна ситуация, когда пометка @deprecated в trunk была поставлена сегодня,
а через 1 день произошел релиз пакета - и пометка @deprecated перешла
в tags/release, а в mailing list'e предупреждения еще не было.
В таком случае, 15 календарных дней можно отсчитывать с момента релиза - и
затем удалять код в trunk'e.

Запрещено ставить пометки @deprecated без указания методов-заменителей
(пометка @see), либо объяснения, почему такой-то метод должен быть удален.

==============================
Снятие пометок @deprecated
==============================
В случае, если пометка @deprecated была поставлена ошибочно, ее можно снять.
Но если было уведомление разработчиков в mailing list'e или релиз -
то необходимо еще раз уведомить в mailing list в эту же тему, что пометка
снята из-за ошибки. Чтобы разработчики не запутались :-)